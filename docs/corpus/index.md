---
layout: page
title: "Viable Prompt Protocol Corpus"
permalink: /corpus/
nav_order: 30
---

The corpus directory contains the transcripts collected by the experiment
runners. Browse the files on GitHub:
[`/corpus/`](https://github.com/cbassuarez/viable-prompt-protocol/tree/main/corpus).

## Layout

- `corpus/v1.4/schema.json` — JSON Schema describing the shape of each saved
  session (IDs, meta fields, turns, and parsed footers).
- `corpus/v1.4/index.jsonl` — newline-delimited index of sessions with model,
  provider, condition, challenge type, and timestamps.
- `corpus/v1.4/sessions/*.json` — per-session transcripts generated by
  experiments (e.g., `exp1-protret-0001.json`). Each file records user and
  assistant turns, raw headers, parsed tags, and footers.

The files follow the same schema validated by `node scripts/test-transcripts.mjs`.
Session IDs align with the `id` fields in each experiment’s `configs.jsonl` so
you can trace runs back to their source configuration.

---

## 6. Browse sessions

The table below is generated from `corpus/v1.4/index.jsonl` via
`docs/_data/corpus-v1_4.json`. Each row links to a human-readable viewer and
the raw JSON session file.

You can pre-filter by query parameters:

- `?challenge_type=protocol_retention`
- `?challenge_type=prompt_injection`
- `?challenge_type=user_only_protocol`
- `?condition=vpp`, `?condition=baseline`, etc.

### 6.1 Session index

<div class="corpus-table-wrapper">
  <table class="corpus-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Experiment</th>
        <th>Condition</th>
        <th>Model</th>
        <th>Created</th>
        <th>Links</th>
      </tr>
    </thead>
    <tbody id="corpus-table-body">
    {% assign entries = site.data.corpus-v1_4 | sort: "created_at" %}
    {% for entry in entries %}
      <tr
        data-corpus-row
        data-challenge-type="{{ entry.challenge_type | escape }}"
        data-condition="{{ entry.condition | escape }}"
      >
        <td class="corpus-id">
          <code>{{ entry.id }}</code>
        </td>
        <td>
          <code>{{ entry.challenge_type }}</code>
        </td>
        <td>
          <code>{{ entry.condition }}</code>
        </td>
        <td>
          <code>{{ entry.model }}</code>
        </td>
        <td>
          {% if entry.created_at %}
          <time datetime="{{ entry.created_at }}">{{ entry.created_at }}</time>
          {% else %}
          &mdash;
          {% endif %}
        </td>
        <td class="corpus-links">
          <a href="{{ "/corpus/session" | relative_url }}?id={{ entry.id | uri_escape }}">
            View
          </a>
          &nbsp;&middot;&nbsp;
          <a href="{{ entry.path | relative_url }}" target="_blank" rel="noopener">
            JSON
          </a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

<div id="corpus-active-filter" class="corpus-active-filter" aria-live="polite"></div>

<script>
  (function () {
    const params = new URLSearchParams(window.location.search);
    const filterChallenge = params.get("challenge_type");
    const filterCondition = params.get("condition");

    const rows = Array.from(document.querySelectorAll("[data-corpus-row]"));
    const statusEl = document.getElementById("corpus-active-filter");

    function applyFilters() {
      let visibleCount = 0;

      rows.forEach((row) => {
        const ct = row.dataset.challengeType || "";
        const cond = row.dataset.condition || "";

        let ok = true;
        if (filterChallenge && ct !== filterChallenge) ok = false;
        if (filterCondition && cond !== filterCondition) ok = false;

        row.style.display = ok ? "" : "none";
        if (ok) visibleCount += 1;
      });

      const parts = [];
      if (filterChallenge) parts.push("challenge_type=" + filterChallenge);
      if (filterCondition) parts.push("condition=" + filterCondition);

      if (statusEl) {
        if (parts.length === 0) {
          statusEl.textContent = "";
        } else {
          statusEl.textContent =
            "Filters: " + parts.join(", ") + " — " + visibleCount + " sessions.";
        }
      }
    }

    applyFilters();
  })();
</script>
