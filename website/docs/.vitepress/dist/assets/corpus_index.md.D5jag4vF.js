import{_ as Z,c as G,o as Y,ae as K}from"./chunks/framework.FAYkJyE3.js";(function(){var O,R;if(typeof window>"u")return;const w=new URLSearchParams(window.location.search),C=w.get("challenge_type")||"",A=w.get("condition")||"",g=document.getElementById("corpus-table-body"),o=document.getElementById("corpus-filter-challenge"),p=document.getElementById("corpus-filter-condition"),m=document.getElementById("corpus-search"),f=document.getElementById("corpus-group-toggle"),b=document.getElementById("corpus-active-filter"),y=document.getElementById("corpus-pagination"),M=(((R=(O=window.__VP_SITE_DATA__)==null?void 0:O.site)==null?void 0:R.base)||"/").replace(/\/$/,""),U=x("/corpus/v1.4/corpus-v1_4.json"),v=50;let j=[],_=[],k={key:"created_at",dir:"desc"},l=1;z();async function z(){if(g){B("Loading corpus index…");try{const s=await fetch(U,{cache:"no-store"});if(!s.ok)throw new Error("Failed to load corpus data: "+s.status);const t=await s.json();j=Array.isArray(t)?t:[],J(j),C&&o&&(o.value=C),A&&p&&(p.value=A),W(),u()}catch(s){console.error(s),B("Unable to load session index: "+((s==null?void 0:s.message)||String(s)))}}}function x(s){if(!s||s.startsWith("http://")||s.startsWith("https://"))return s;const t=s.startsWith("/")?s:"/"+s;return(M||"")+t}function B(s){g&&(g.innerHTML='<tr data-empty-row><td colspan="6"><em>'+s+"</em></td></tr>",y&&(y.textContent=""))}function J(s){if(!Array.isArray(s)||!s.length)return;const t=new Set,n=new Set;if(s.forEach(i=>{i!=null&&i.challenge_type&&t.add(i.challenge_type),i!=null&&i.condition&&n.add(i.condition)}),o){for(;o.options.length>1;)o.remove(1);Array.from(t).sort().forEach(i=>{const e=document.createElement("option");e.value=i,e.textContent=i,o.appendChild(e)})}if(p){for(;p.options.length>1;)p.remove(1);Array.from(n).sort().forEach(i=>{const e=document.createElement("option");e.value=i,e.textContent=i,p.appendChild(e)})}}function W(){o&&o.addEventListener("change",()=>{l=1,u()}),p&&p.addEventListener("change",()=>{l=1,u()}),m&&m.addEventListener("input",()=>{l=1,u()}),f&&f.addEventListener("change",()=>{l=1,u()}),document.querySelectorAll(".corpus-table thead th[data-sort-key]").forEach(t=>{t.addEventListener("click",()=>{const n=t.getAttribute("data-sort-key");n&&(k.key===n?k.dir=k.dir==="asc"?"desc":"asc":(k.key=n,k.dir=n==="created_at"?"desc":"asc"),N(),u())})}),N()}function u(){const s=o&&o.value||"",t=p&&p.value||"",n=m?m.value.trim().toLowerCase():"";_=j.filter(a=>!(s&&a.challenge_type!==s||t&&a.condition!==t||n&&![a.id,a.model,a.challenge_type,a.condition,a.provider].filter(Boolean).join(" ").toLowerCase().includes(n)));const i=_.length;if(!i){B("No sessions match the current filters."),b&&(b.textContent=V(0));return}_.sort((a,E)=>{const{key:h,dir:c}=k,F=a==null?void 0:a[h],S=E==null?void 0:E[h];let P=0;if(h==="created_at"){const I=F&&Date.parse(F)||0,T=S&&Date.parse(S)||0;P=I-T}else{const I=(F??"").toString(),T=(S??"").toString();P=I.localeCompare(T)}return c==="asc"?P:-P});const e=Math.max(1,Math.ceil(i/v));l>e&&(l=e);const r=(l-1)*v,d=r+v,q=_.slice(r,d);$(q),H(i,e),b&&(b.textContent=V(i))}function $(s){if(!g)return;if(!Array.isArray(s)||!s.length){B("No sessions to display.");return}const t=document.createDocumentFragment(),n=f&&f.checked;let i=null;s.forEach(e=>{const r=e.challenge_type||"";if(n&&r&&r!==i){i=r;const c=document.createElement("tr");c.className="corpus-group-row";const F=document.createElement("td");F.colSpan=6,F.textContent=r,c.appendChild(F),t.appendChild(c)}const d=document.createElement("tr");d.className="corpus-row",d.appendChild(D(e.id||"","corpus-id")),d.appendChild(L(e.challenge_type||"","corpus-badge--experiment")),d.appendChild(L(e.condition||"","corpus-badge--condition")),d.appendChild(D(e.model||"",""));const q=document.createElement("td");if(e.created_at){const c=document.createElement("time");c.dateTime=e.created_at,c.textContent=e.created_at,q.appendChild(c)}else q.textContent="—";d.appendChild(q);const a=document.createElement("td");a.className="corpus-links";const E=document.createElement("a");E.href=x("/corpus/session?id="+encodeURIComponent(e.id||"")),E.textContent="View";const h=document.createElement("a");e.path?h.href=x(e.path):e.id?h.href=x("/corpus/v1.4/sessions/"+encodeURIComponent(e.id)+".json"):h.href="#",h.target="_blank",h.rel="noopener",h.textContent="JSON",a.appendChild(E),a.appendChild(h),d.appendChild(a),t.appendChild(d)}),g.innerHTML="",g.appendChild(t)}function D(s,t){const n=document.createElement("td");t&&(n.className=t);const i=document.createElement("code");return i.textContent=s||"",n.appendChild(i),n}function L(s,t){const n=document.createElement("td"),i=document.createElement("span");return i.className="corpus-badge "+(t||""),i.textContent=s||"—",n.appendChild(i),n}function H(s,t){if(!y)return;if(s<=v){y.textContent="";return}y.innerHTML="";const n=document.createElement("span");n.className="corpus-pagination-info",n.textContent="Page "+l+" of "+t+" — "+s+" sessions",y.appendChild(n);const i=document.createElement("div");i.className="corpus-pagination-controls";const e=document.createElement("button");e.type="button",e.textContent="Prev",e.disabled=l<=1,e.addEventListener("click",()=>{l>1&&(l-=1,u())}),i.appendChild(e);const r=document.createElement("button");r.type="button",r.textContent="Next",r.disabled=l>=t,r.addEventListener("click",()=>{l<t&&(l+=1,u())}),i.appendChild(r),y.appendChild(i)}function N(){document.querySelectorAll(".corpus-table thead th[data-sort-key]").forEach(t=>{const n=t.getAttribute("data-sort-key");if(!n)return;const i=n===k.key;t.classList.toggle("corpus-sort-active",i),t.setAttribute("aria-sort",i?k.dir==="asc"?"ascending":"descending":"none")})}function V(s){const t=[],n=o&&o.value||"",i=p&&p.value||"",e=m?m.value.trim():"";return n&&t.push("challenge_type="+n),i&&t.push("condition="+i),e&&t.push('search="'+e+'"'),t.length?"Filters: "+t.join(", ")+" — "+s+" sessions.":s+" sessions."}})();const is=JSON.parse('{"title":"Corpus","description":"","frontmatter":{"title":"Corpus"},"headers":[],"relativePath":"corpus/index.md","filePath":"corpus/index.md","lastUpdated":1763293075000}'),Q={name:"corpus/index.md"};function X(w,C,A,g,o,p){return Y(),G("div",null,[...C[0]||(C[0]=[K(`<h1 id="viable-prompt-protocol-corpus-v1-4" tabindex="-1">Viable Prompt Protocol Corpus (v1.4) <a class="header-anchor" href="#viable-prompt-protocol-corpus-v1-4" aria-label="Permalink to &quot;Viable Prompt Protocol Corpus (v1.4)&quot;">​</a></h1><blockquote><p>A small, disciplined corpus of structured chats for studying <strong>tag+footer protocols</strong>, <strong>prompt injection robustness</strong>, and <strong>instruction hierarchies</strong> in large language models.</p></blockquote><p>The VPP corpus consists of synthetic conversations between scripted <em>users</em> and OpenAI models (e.g. <code>gpt-4.1</code>, <code>gpt-5.1</code>). Each conversation follows a unified JSON schema and is stored under <code>corpus/v1.4/</code>. No human personal data is included.</p><p>This page serves two purposes:</p><ol><li>A <strong>corpus browser</strong> for exploring individual sessions.</li><li>A <strong>reference page</strong> for the schema and experiment families in v1.4.</li></ol><hr><h2 id="_1-corpus-browser" tabindex="-1">1. Corpus browser <a class="header-anchor" href="#_1-corpus-browser" aria-label="Permalink to &quot;1. Corpus browser&quot;">​</a></h2><p>The table below is generated from <code>corpus/v1.4/index.jsonl</code> via a prebuilt <code>corpus/v1.4/corpus-v1_4.json</code> index. Each row links to:</p><ul><li>A <strong>human-readable viewer</strong> (<code>/corpus/session?id=…</code>).</li><li>The <strong>raw JSON</strong> session file.</li></ul><p>You can pre-filter with query parameters:</p><ul><li><code>?challenge_type=protocol_retention</code></li><li><code>?challenge_type=prompt_injection</code></li><li><code>?challenge_type=user_only_protocol</code></li><li><code>?challenge_type=task_utility</code></li><li><code>?challenge_type=friction</code></li><li><code>?challenge_type=long_dialog</code></li><li><code>?condition=vpp</code>, <code>?condition=baseline</code>, <code>?condition=user_only_vpp_explicit</code>, etc.</li></ul><p>Examples:</p><ul><li><code>/corpus?challenge_type=protocol_retention</code></li><li><code>/corpus?condition=vpp</code></li><li><code>/corpus?challenge_type=prompt_injection&amp;condition=baseline</code></li></ul><h3 id="_1-1-session-index" tabindex="-1">1.1 Session index <a class="header-anchor" href="#_1-1-session-index" aria-label="Permalink to &quot;1.1 Session index&quot;">​</a></h3><div class="corpus-controls"><div class="corpus-controls-left"><label> Experiment <select id="corpus-filter-challenge"><option value="">All experiments</option></select></label><label> Condition <select id="corpus-filter-condition"><option value="">All conditions</option></select></label><label class="corpus-group-toggle"><input type="checkbox" id="corpus-group-toggle"> Group by experiment </label></div><div class="corpus-controls-right"><label> Search <input id="corpus-search" type="search" placeholder="id, model, condition…" autocomplete="off"></label></div></div><div class="corpus-table-wrapper"><table class="corpus-table"><thead><tr><th data-sort-key="id">ID</th><th data-sort-key="challenge_type">Experiment</th><th data-sort-key="condition">Condition</th><th data-sort-key="model">Model</th><th data-sort-key="created_at">Created</th><th>Links</th></tr></thead><tbody id="corpus-table-body"><tr data-empty-row><td colspan="6"><em>Loading corpus index…</em></td></tr></tbody></table></div><div id="corpus-active-filter" class="corpus-active-filter" aria-live="polite"></div><div id="corpus-pagination" class="corpus-pagination" aria-live="polite"></div><hr><h2 id="_2-corpus-structure" tabindex="-1">2. Corpus structure <a class="header-anchor" href="#_2-corpus-structure" aria-label="Permalink to &quot;2. Corpus structure&quot;">​</a></h2><p>All v1.4 sessions live under:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>corpus/</span></span>
<span class="line"><span>  v1.4/</span></span>
<span class="line"><span>    index.jsonl</span></span>
<span class="line"><span>    sessions/</span></span>
<span class="line"><span>      exp1-protret-*.json</span></span>
<span class="line"><span>      exp2-promptinj-*.json</span></span>
<span class="line"><span>      exp1b-user-only-*.json</span></span>
<span class="line"><span>      ...</span></span></code></pre></div><h3 id="_2-1-index-file" tabindex="-1">2.1 Index file <a class="header-anchor" href="#_2-1-index-file" aria-label="Permalink to &quot;2.1 Index file&quot;">​</a></h3><p><code>corpus/v1.4/index.jsonl</code> is a line-delimited JSON index of sessions.</p><p>Each line is a minimal descriptor:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exp1-protret-0001-018&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;condition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vpp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;challenge_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;protocol_retention&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-11-14T06:32:26.165Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Fields:</p><ul><li><code>id</code> — session id (also the base filename).</li><li><code>model</code> — underlying model (e.g. gpt-4.1).</li><li><code>provider</code> — &quot;openai&quot; in v1.4.</li><li><code>condition</code> — experimental condition (&quot;vpp&quot;, &quot;baseline&quot;, &quot;user_only_vpp_explicit&quot;, etc.).</li><li><code>challenge_type</code> — experiment family (&quot;protocol_retention&quot;, &quot;prompt_injection&quot;, &quot;user_only_protocol&quot;, &quot;task_utility&quot;, &quot;friction&quot;, &quot;long_dialog&quot;, etc.).</li><li><code>created_at</code> — ISO8601 timestamp.</li></ul><h3 id="_2-2-session-schema" tabindex="-1">2.2 Session schema <a class="header-anchor" href="#_2-2-session-schema" aria-label="Permalink to &quot;2.2 Session schema&quot;">​</a></h3><p>Each session is a single JSON object:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exp1-protret-0001-018&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;protocol_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;meta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;condition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vpp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;challenge_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;protocol_retention&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-11-14T06:32:26.165Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_template_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exp1-protret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;injection_template_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;seed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;good&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;failure_modes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;turns&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;turn_index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;raw_header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;!&lt;g&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;modifiers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;… user text …&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;footer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;parsed_footer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;turn_index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;raw_header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;g&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;tag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;modifiers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;… assistant body …&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;footer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[Version=v1.4 | Tag=g_1 | Sources=none | Assumptions=1 | Cycle=1/3 | Locus=protocol retention]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;parsed_footer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v1.4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;tag_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;g_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;sources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;none&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;assumptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;cycle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;cycle_max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;locus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;protocol retention&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;raw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[Version=v1.4 | Tag=g_1 | Sources=none | Assumptions=1 | Cycle=1/3 | Locus=protocol retention]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Fields:</p><ul><li><code>protocol_version</code> — protocol spec used (&quot;1.4&quot;).</li><li><code>meta</code> — run-time metadata (model, provider, condition, etc.).</li><li><code>label</code> — high-level quality label (&quot;good&quot; in v1.4; can be extended).</li><li><code>failure_modes</code> — list of explicit failure labels.</li><li><code>turns</code> — full conversation, one entry per turn.</li></ul><p>Each turn:</p><ul><li><code>turn_index</code> — 0-based index into the conversation.</li><li><code>role</code> — &quot;user&quot; or &quot;assistant&quot;.</li><li><code>raw_header</code> — first line of the turn (e.g. <code>!&lt;q&gt;</code>, <code>&lt;o&gt;</code>, or null).</li><li><code>tag</code> — parsed tag (&quot;g&quot;, &quot;q&quot;, &quot;o&quot;, &quot;c&quot;, &quot;o_f&quot;, or null).</li><li><code>modifiers</code> — parsed modifiers (if any) from the command line.</li><li><code>body</code> — main content of the turn.</li><li><code>footer</code> — last line if present (VPP footer for assistant turns in VPP conditions).</li><li><code>parsed_footer</code> — structured fields extracted from the footer.</li></ul><h2 id="_3-experiments-in-v1-4" tabindex="-1">3. Experiments in v1.4 <a class="header-anchor" href="#_3-experiments-in-v1-4" aria-label="Permalink to &quot;3. Experiments in v1.4&quot;">​</a></h2><p>The v1.4 corpus currently contains multiple experiment families:</p><table tabindex="0"><thead><tr><th>Experiment</th><th>challenge_type</th><th>Example conditions</th><th>Main question</th></tr></thead><tbody><tr><td>Exp1</td><td>protocol_retention</td><td>vpp, baseline</td><td>Does VPP “stick” when installed via system + user?</td></tr><tr><td>Exp2</td><td>prompt_injection</td><td>vpp, baseline</td><td>Does VPP survive a direct “drop protocol” instruction?</td></tr><tr><td>Exp1b</td><td>user_only_protocol</td><td>user_only_vpp_explicit, ambient variants</td><td>Can VPP be installed by user-only instructions?</td></tr><tr><td>Exp3</td><td>task_injection</td><td>vpp_task_injection, baseline_task_injection</td><td>Does VPP preserve task goals under injection?</td></tr><tr><td>Exp4</td><td>task_utility</td><td>vpp_task_utility, baseline_task_utility, mini_proto_task_utility</td><td>Does VPP improve structural utility?</td></tr><tr><td>Exp5</td><td>friction</td><td>vpp_friction, baseline_friction, mini_proto_friction</td><td>Does VPP reduce back-and-forth and complaints?</td></tr><tr><td>Exp6</td><td>long_dialog</td><td>vpp_longdialog_grounded, vpp_longdialog_tags_only, baseline_longdialog_tags</td><td>Does VPP remain intact over long conversations?</td></tr></tbody></table><p>For full experimental write-ups, see:</p><ul><li>Exp-01: Protocol retention</li><li>Exp-01b: User-only protocol rehearsal</li><li>Exp-02: Prompt injection</li><li>Exp-03: Task injection</li><li>Exp-04: Task utility</li><li>Exp-05: Friction &amp; convergence</li><li>Exp-06: Long dialog retention</li></ul><h2 id="_4-reproducing-and-extending-the-corpus" tabindex="-1">4. Reproducing and extending the corpus <a class="header-anchor" href="#_4-reproducing-and-extending-the-corpus" aria-label="Permalink to &quot;4. Reproducing and extending the corpus&quot;">​</a></h2><h3 id="_4-1-building-corpus-data-for-this-page" tabindex="-1">4.1 Building corpus data for this page <a class="header-anchor" href="#_4-1-building-corpus-data-for-this-page" aria-label="Permalink to &quot;4.1 Building corpus data for this page&quot;">​</a></h3><p>From the repository root:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:corpus-data</span></span></code></pre></div><p>This reads <code>corpus/v1.4/index.jsonl</code> and writes <code>website/docs/corpus/corpus-v1_4.json</code>, which powers the browser above.</p><h3 id="_4-2-running-experiments" tabindex="-1">4.2 Running experiments <a class="header-anchor" href="#_4-2-running-experiments" aria-label="Permalink to &quot;4.2 Running experiments&quot;">​</a></h3><p>From the repository root:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">## Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">## Set API key</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OPENAI_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_api_key_here</span></span></code></pre></div><p>Then, for example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">## Exp1 — Protocol Retention</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run:exp1-protret</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> analyze:exp1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">## Exp2 — Prompt Injection</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run:exp2-promptinj</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> analyze:exp2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">## Exp1b — User-Only Protocol</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run:exp1b-user-only</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> analyze:exp1b</span></span></code></pre></div><p>Each <code>run:*</code> script:</p><ul><li>Reads a <code>configs.jsonl</code> file for that experiment.</li><li>Calls the OpenAI Chat Completions API for each config.</li><li>Writes one JSON file per session into <code>corpus/v1.4/sessions/</code>.</li><li>Appends a summary line to <code>corpus/v1.4/index.jsonl</code>.</li></ul><p>Each <code>analyze:*</code> script:</p><ul><li>Scans <code>index.jsonl</code> and <code>sessions/</code>.</li><li>Filters by <code>challenge_type</code> and <code>condition</code>.</li><li>Prints computed metrics to stdout.</li></ul><h2 id="_5-intended-use" tabindex="-1">5. Intended use <a class="header-anchor" href="#_5-intended-use" aria-label="Permalink to &quot;5. Intended use&quot;">​</a></h2><p>The VPP v1.4 corpus is designed to support:</p><h3 id="evaluation-benchmarking" tabindex="-1">Evaluation &amp; benchmarking <a class="header-anchor" href="#evaluation-benchmarking" aria-label="Permalink to &quot;Evaluation &amp; benchmarking&quot;">​</a></h3><ul><li>Drop-in evaluation of structural protocol adherence across models.</li><li>Direct comparisons of how different models handle tag+footer instructions.</li></ul><h3 id="prompt-injection-research" tabindex="-1">Prompt injection research <a class="header-anchor" href="#prompt-injection-research" aria-label="Permalink to &quot;Prompt injection research&quot;">​</a></h3><ul><li>Studying how explicit protocols interact with adversarial user instructions.</li><li>Designing stronger structural defenses and guidance.</li></ul><h3 id="instruction-hierarchy-studies" tabindex="-1">Instruction hierarchy studies <a class="header-anchor" href="#instruction-hierarchy-studies" aria-label="Permalink to &quot;Instruction hierarchy studies&quot;">​</a></h3><ul><li>Observing how system vs user vs prior behavior interact.</li><li>Quantifying when and how models “refuse” to drop system-installed structure.</li></ul><h3 id="diffusion-over-time" tabindex="-1">Diffusion over time <a class="header-anchor" href="#diffusion-over-time" aria-label="Permalink to &quot;Diffusion over time&quot;">​</a></h3><ul><li>Re-running ambient conditions (e.g. Exp1b) on future models.</li><li>Watching for the first non-zero signals of “ambient VPP” (e.g., models spontaneously treating <code>!&lt;q&gt;</code> as a command plus footer).</li></ul><p>In short: the corpus is both a testbed and a signal. It characterizes how current models respond to explicit protocol structure, and also serves as a seed for future work that wants to treat structured chat protocols as first-class objects in LLM design.</p>`,65)])])}const ts=Z(Q,[["render",X]]);export{is as __pageData,ts as default};
