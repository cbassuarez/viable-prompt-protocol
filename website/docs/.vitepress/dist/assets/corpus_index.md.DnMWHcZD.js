import{_ as T,c as k,o as j,ae as A}from"./chunks/framework.FAYkJyE3.js";(function(){var b,w;if(typeof window>"u")return;const h=new URLSearchParams(window.location.search),c=h.get("challenge_type"),p=h.get("condition"),d=document.getElementById("corpus-active-filter"),r=document.getElementById("corpus-table-body"),g=(((w=(b=window.__VP_SITE_DATA__)==null?void 0:b.site)==null?void 0:w.base)||"/").replace(/\/$/,""),x=f("/corpus/v1.4/corpus-v1_4.json");let m=[];v();async function v(){if(r)try{const t=await fetch(x,{cache:"no-store"});if(!t.ok)throw new Error("Failed to load corpus data: "+t.status);const s=await t.json();E(s),m=Array.from(r.querySelectorAll("[data-corpus-row]")),S()}catch(t){console.error(t),d&&(d.textContent="Unable to load session index: "+(t.message||String(t)))}}function E(t){if(!r||!Array.isArray(t))return;const s=t.slice().sort((e,o)=>{const i=e!=null&&e.created_at&&Date.parse(e.created_at)||0,n=o!=null&&o.created_at&&Date.parse(o.created_at)||0;return i!==n?n-i:String((e==null?void 0:e.id)||"").localeCompare(String((o==null?void 0:o.id)||""))}),a=document.createDocumentFragment();s.forEach(e=>{const o=document.createElement("tr");o.setAttribute("data-corpus-row",""),o.dataset.challengeType=(e==null?void 0:e.challenge_type)||"",o.dataset.condition=(e==null?void 0:e.condition)||"",o.appendChild(u((e==null?void 0:e.id)||"","corpus-id")),o.appendChild(u((e==null?void 0:e.challenge_type)||"")),o.appendChild(u((e==null?void 0:e.condition)||"")),o.appendChild(u((e==null?void 0:e.model)||""));const i=document.createElement("td");if(e!=null&&e.created_at){const C=document.createElement("time");C.dateTime=e.created_at,C.textContent=e.created_at,i.appendChild(C)}else i.textContent="—";o.appendChild(i);const n=document.createElement("td");n.className="corpus-links";const _=document.createElement("a");_.href=f("/corpus/session/?id="+encodeURIComponent((e==null?void 0:e.id)||"")),_.textContent="View";const l=document.createElement("a");e!=null&&e.path?l.href=f(e.path):l.href="#",l.target="_blank",l.rel="noopener",l.textContent="JSON",n.appendChild(_),n.appendChild(document.createTextNode("  · ")),n.appendChild(l),o.appendChild(n),a.appendChild(o)}),r.innerHTML="",r.appendChild(a)}function u(t,s){const a=document.createElement("td");s&&(a.className=s);const e=document.createElement("code");return e.textContent=t||"",a.appendChild(e),a}function S(){if(!m.length)return;let t=0;m.forEach(a=>{const e=a.dataset.challengeType||"",o=a.dataset.condition||"";let i=!0;c&&e!==c&&(i=!1),p&&o!==p&&(i=!1),a.style.display=i?"":"none",i&&(t+=1)});const s=[];c&&s.push("challenge_type="+c),p&&s.push("condition="+p),d&&(s.length===0?d.textContent="":d.textContent="Filters: "+s.join(", ")+" — "+t+" sessions.")}function f(t){if(!t||t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.startsWith("/")?t:`/${t}`;return`${g}${s}`||s}})();const P=JSON.parse('{"title":"Corpus","description":"","frontmatter":{"title":"Corpus"},"headers":[],"relativePath":"corpus/index.md","filePath":"corpus/index.md","lastUpdated":1763324485000}'),B={name:"corpus/index.md"};function D(h,c,p,d,r,g){return j(),k("div",null,[...c[0]||(c[0]=[A('<p>The corpus directory contains the transcripts collected by the experiment runners. Browse the files on GitHub: <a href="https://github.com/cbassuarez/viable-prompt-protocol/tree/main/corpus" target="_blank" rel="noreferrer"><code>/corpus/</code></a>.</p><h2 id="layout" tabindex="-1">Layout <a class="header-anchor" href="#layout" aria-label="Permalink to &quot;Layout&quot;">​</a></h2><ul><li><code>corpus/v1.4/schema.json</code> — JSON Schema describing the shape of each saved session (IDs, meta fields, turns, and parsed footers).</li><li><code>corpus/v1.4/index.jsonl</code> — newline-delimited index of sessions with model, provider, condition, challenge type, and timestamps.</li><li><code>corpus/v1.4/sessions/*.json</code> — per-session transcripts generated by experiments (e.g., <code>exp1-protret-0001.json</code>). Each file records user and assistant turns, raw headers, parsed tags, and footers.</li></ul><p>The files follow the same schema validated by <code>node scripts/test-transcripts.mjs</code>. Session IDs align with the <code>id</code> fields in each experiment’s <code>configs.jsonl</code> so you can trace runs back to their source configuration.</p><hr><h2 id="_6-browse-sessions" tabindex="-1">6. Browse sessions <a class="header-anchor" href="#_6-browse-sessions" aria-label="Permalink to &quot;6. Browse sessions&quot;">​</a></h2><p>The table below is generated from <code>corpus/v1.4/index.jsonl</code> via <code>website/docs/public/corpus/v1.4/corpus-v1_4.json</code>. Each row links to a human-readable viewer and the raw JSON session file.</p><p>You can pre-filter by query parameters:</p><ul><li><code>?challenge_type=protocol_retention</code></li><li><code>?challenge_type=prompt_injection</code></li><li><code>?challenge_type=user_only_protocol</code></li><li><code>?condition=vpp</code>, <code>?condition=baseline</code>, etc.</li></ul><h3 id="_6-1-session-index" tabindex="-1">6.1 Session index <a class="header-anchor" href="#_6-1-session-index" aria-label="Permalink to &quot;6.1 Session index&quot;">​</a></h3><div class="corpus-table-wrapper"><table class="corpus-table"><thead><tr><th>ID</th><th>Experiment</th><th>Condition</th><th>Model</th><th>Created</th><th>Links</th></tr></thead><tbody id="corpus-table-body"></tbody></table></div><div id="corpus-active-filter" class="corpus-active-filter" aria-live="polite"></div>',12)])])}const q=T(B,[["render",D]]);export{P as __pageData,q as default};
