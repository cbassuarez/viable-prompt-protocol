import{_ as R,c as W,o as D,j as a,a as b}from"./chunks/framework.FAYkJyE3.js";(function(){var U,j;if(typeof window>"u")return;const c=document.getElementById("corpus-session-root");if(!c)return;const m=new URLSearchParams(window.location.search).get("id"),H=(((j=(U=window.__VP_SITE_DATA__)==null?void 0:U.site)==null?void 0:j.base)||"/").replace(/\/$/,"");if(!m){c.innerHTML="<p><em>Missing ?id=… query parameter.</em></p>";return}const M=x("/corpus/v1.4/sessions/"+encodeURIComponent(m)+".json");I(M,m);function x(t){if(!t||t.startsWith("http://")||t.startsWith("https://"))return t;const r=t.startsWith("/")?t:"/"+t;return(H||"")+r}async function I(t,r){try{c.innerHTML="<p><em>Loading session "+r+"…</em></p>";const e=await fetch(t,{cache:"no-store"});if(!e.ok)throw new Error("Failed to load session: "+e.status);const o=await e.json();V(o)}catch(e){console.error(e),c.innerHTML="<p><em>Unable to load session: "+((e==null?void 0:e.message)||String(e))+"</em></p>"}}function V(t){const r=Array.isArray(t.turns)?t.turns:[],e=t.meta||{},o={g:0,q:0,o:0,c:0,o_f:0,other:0};r.forEach(n=>{const s=n==null?void 0:n.tag;s&&(o.hasOwnProperty(s)?o[s]+=1:o.other+=1)});const i=document.createElement("div"),l=document.createElement("section");l.className="corpus-session-meta";const h=document.createElement("div");h.className="corpus-session-meta-header";const k=document.createElement("div");k.className="corpus-session-id",k.textContent=t.id||"(unknown id)",h.appendChild(k);const d=document.createElement("div");d.className="corpus-session-badges",e.challenge_type&&d.appendChild(u(e.challenge_type,"badge--challenge")),e.condition&&d.appendChild(u(e.condition,"badge--condition")),e.model&&d.appendChild(u(e.model,"badge--model")),t.protocol_version&&d.appendChild(u("protocol="+t.protocol_version,"badge--protocol")),h.appendChild(d),l.appendChild(h);const f=document.createElement("div");f.className="corpus-session-meta-body";const C=document.createElement("div");if(e.created_at){const n=document.createElement("span");n.textContent="Created: ";const s=document.createElement("time");s.dateTime=e.created_at,s.textContent=e.created_at,C.appendChild(n),C.appendChild(s)}else C.textContent="Created: —";const y=document.createElement("div");y.className="corpus-session-backlink";const T=document.createElement("a"),E=[];e.challenge_type&&E.push("challenge_type="+encodeURIComponent(e.challenge_type)),e.condition&&E.push("condition="+encodeURIComponent(e.condition));const $=E.length?"?"+E.join("&"):"";T.href=x("/corpus"+$),T.textContent="Back to corpus browser",y.appendChild(T),f.appendChild(C),f.appendChild(y),l.appendChild(f);const B=document.createElement("div");B.className="corpus-tag-histogram";const g=[];["g","q","o","c","o_f"].forEach(n=>{o[n]&&g.push(n+": "+o[n])}),o.other&&g.push("other: "+o.other),B.innerHTML="<strong>Tags:</strong> "+(g.length?g.map(n=>"<code>"+n+"</code>").join("  "):"none"),l.appendChild(B),i.appendChild(l);const S=document.createElement("section");S.className="corpus-turns",r.forEach(n=>{const s=document.createElement("article"),A=n.role==="assistant"?"assistant":"user";s.className="corpus-turn corpus-turn--"+A;const _=document.createElement("div");_.className="corpus-turn-header";const v=document.createElement("div");v.className="corpus-turn-header-left";const L=document.createElement("div");L.className="corpus-turn-role",L.textContent=n.role||"unknown";const P=document.createElement("div");P.className="corpus-turn-badge",P.textContent=n.tag||"—",v.appendChild(L),v.appendChild(P);const q=document.createElement("div");q.className="corpus-turn-index",q.textContent="Turn "+(n.turn_index??"?"),_.appendChild(v),_.appendChild(q),s.appendChild(_);const p=document.createElement("div");p.className="corpus-turn-blocks",n.raw_header&&p.appendChild(N("Header",n.raw_header)),p.appendChild(N("Body",n.body||"")),typeof n.footer=="string"&&n.footer.trim()&&p.appendChild(N("Footer",n.footer)),s.appendChild(p),S.appendChild(s)}),i.appendChild(S),c.innerHTML="",c.appendChild(i)}function u(t,r){const e=document.createElement("span");return e.className="badge "+(r||""),e.textContent=t,e}function N(t,r){const e=document.createElement("div"),o=document.createElement("div");o.className="corpus-turn-block-label",o.textContent=t;const i=document.createElement("pre");return i.textContent=r,e.className="corpus-turn-block",e.appendChild(o),e.appendChild(i),e}})();const J=JSON.parse('{"title":"Corpus Session Viewer","description":"","frontmatter":{"layout":"page","title":"Corpus Session Viewer","permalink":"/corpus/session/","nav_exclude":true},"headers":[],"relativePath":"corpus/session.md","filePath":"corpus/session.md","lastUpdated":1763293112000}'),F={name:"corpus/session.md"};function O(c,w,m,H,M,x){return D(),W("div",null,[...w[0]||(w[0]=[a("h1",{id:"session-viewer",tabindex:"-1"},[b("Session viewer "),a("a",{class:"header-anchor",href:"#session-viewer","aria-label":'Permalink to "Session viewer"'},"​")],-1),a("p",null,[b("This page renders a single corpus session from "),a("code",null,"corpus/v1.4/sessions/"),b("."),a("br"),b(" Provide a query parameter, for example:")],-1),a("ul",null,[a("li",null,[a("code",null,"/corpus/session?id=exp1-protret-0001-018")])],-1),a("div",{id:"corpus-session-root",class:"corpus-session-root"},[a("p",null,[a("em",null,"Loading session…")])],-1)])])}const G=R(F,[["render",O]]);export{J as __pageData,G as default};
